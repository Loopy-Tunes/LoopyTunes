\doxysection{Track.\+h}
\hypertarget{_track_8h_source}{}\label{_track_8h_source}\index{DSP/Track.h@{DSP/Track.h}}
\mbox{\hyperlink{_track_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ TRACK\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ TRACK\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_pitch_shift_8h}{FX/PitchShift.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_waveshaper_8h}{FX/Waveshaper.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_filter_8h}{FX/Filter.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_delay_8h}{FX/Delay.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_reverb_8h}{FX/Reverb/Reverb.h}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_audio_parameter_8h}{../Parameters/AudioParameter.h}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_binary_parameter_8h}{../Parameters/BinaryParameter.h}}"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{/**********************************************************/}}
\DoxyCodeLine{00018\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_track}{Track}}}
\DoxyCodeLine{00019\ \{}
\DoxyCodeLine{00020\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ \ \ /*************************************************************************************************/}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_loopy_tunes_8cpp_a02fd73d861ef2e4aabb38c0c9ff82947}{init}}(\textcolor{keywordtype}{float}*\ mem[2],\ \textcolor{keywordtype}{int}\ ID,\ dsy\_gpio\_pin\ r,\ dsy\_gpio\_pin\ p);}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{\ \ \ \ /***************************************************************************************/}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_a4e167244a48672681f2e0b187b9fd2a7}{initFX}}(\mbox{\hyperlink{class_encoder_driver}{EncoderDriver}}*\ driver,\ DelayLine<float,\ MAXDELAY>*\ dl[2]);}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_ac41690e46e3178d90acb87327955df1f}{tick}}();}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_ae2c5e0f996e01be7c34e695fa9714905}{resetBuffer}}();}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_af5bf39d8eed1fdd58ee86ebbfae8f3e3}{setIsRecording}}();}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_a639cee2f6d225448b4a86166bb0a4ae8}{setIsPlaying}}();}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{_helpers_8h_a5e9684d2e87fbf099474d8ece4c3a69c}{TrackState}}\ \mbox{\hyperlink{class_track_a7faeb268f0b7825dc9f1ac31d2f96589}{getState}}()\ \{\ \textcolor{keywordflow}{return}\ state;\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_a336774fc362866bf0df508aead2116d0}{incrementWritePos}}();}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_a80383a6a58e05f2ca099ced9e7e0992c}{incrementReadPos}}();}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_track_a6f77ea1dd3f160fca62bf949f65c6b26}{getReadPos}}()\ \{\ \textcolor{keywordflow}{return}\ ph.readPos;\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{comment}{\ \ \ \ /**********************************************************************/}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_adb288fb70bc39ec6f1d50be4dc8d3174}{processInputBlock}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ left,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ right,\ \textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ /***********************************************************************************/}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_track_a9a6cafdef172c8abfb21a6a78664c5d8}{processOutputBlock}}(\textcolor{keywordtype}{float}*\ output[2],\ \textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{comment}{\ \ \ \ /***********************************************************************/}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{void}\ setLoopStart()}
\DoxyCodeLine{00100\ \ \ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ startPos\ =\ bufferSize\ -\/\ ((startPos\ *\ \mbox{\hyperlink{_constants_8h_a538e0cad3acb787a49e16b1e53787610}{SAMPLERATE}})\ /\ 1000);}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ /*******************************************************************/}}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{float}\ calculateLoop(\textcolor{keywordtype}{float}\ input,\ \textcolor{keywordtype}{int}\ channel)}
\DoxyCodeLine{00110\ \ \ \ \ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ d1\ =\ bufferSize\ -\/\ ph.readPos;}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ d2\ =\ startPos\ +\ ph.readPos;}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{_loopy_tunes_8cpp_aba0b97df8abaa038fb9f0f71f034a4cd}{sample}}\ =\ ((input\ *\ d1)\ +\ (buffer[channel][0]\ *\ d2))\ /\ (d1\ +\ d2);}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_loopy_tunes_8cpp_aba0b97df8abaa038fb9f0f71f034a4cd}{sample}};}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{int}\ trackID;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \mbox{\hyperlink{_helpers_8h_a5e9684d2e87fbf099474d8ece4c3a69c}{TrackState}}\ state;}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keyword}{struct\ }Playhead}
\DoxyCodeLine{00122\ \ \ \ \ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ writePos;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ readPos;}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ reset()\ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \{\ }
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ writePos\ =\ 0;}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ readPos\ =\ 0;\ }
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ \ \ \ \ \}\ ph;}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{struct_track_information}{TrackInformation}}\ ti;}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{class_binary_parameter}{BinaryParameter}}\ record;}
\DoxyCodeLine{00135\ \ \ \ \ \mbox{\hyperlink{class_binary_parameter}{BinaryParameter}}\ play;}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordtype}{float}*\ buffer[2];}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bufferSize;}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{float}\ loopStart;}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordtype}{float}\ startPos;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{class_pitch_shift}{PitchShift}}\ pitchShift;}
\DoxyCodeLine{00144\ \ \ \ \ \mbox{\hyperlink{class_waveshaper}{Waveshaper}}\ shaper;}
\DoxyCodeLine{00145\ \ \ \ \ \mbox{\hyperlink{class_filter}{Filter}}\ filter;}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{class_delay}{Delay}}\ delay;}
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{class_reverb}{Reverb}}\ reverb;}
\DoxyCodeLine{00148\ \};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
